<!doctype html>
<html lang="vi">
<head>
    <meta property="og:title" content="DermAI - Ứng dụng AI hỗ trợ chẩn đoán bệnh da liễu">
    <meta property="og:description" content="Ứng dụng AI hỗ trợ chẩn đoán các bệnh về da liễu nhanh chóng và chính xác. Sử dụng trí tuệ nhân tạo và thị giác máy tính để phân tích hình ảnh da và cung cấp các chẩn đoán kịp thời.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://litclub.pythonanywhere.com/">
    <meta property="og:image" content="https://scontent.fhan15-2.fna.fbcdn.net/v/t39.30808-6/517737809_122100053498943826_3327007350081078447_n.png?_nc_cat=107&ccb=1-7&_nc_sid=cc71e4&_nc_ohc=edONUK9z7kkQ7kNvwGrcQv7&_nc_oc=AdkRdS-VL0_JPfxBJv-XMhR_XPRw6BcxfGIvM441XgvNj4YQEuV7E0WNzscIUV9WT8I&_nc_zt=23&_nc_ht=scontent.fhan15-2.fna&_nc_gid=oQXmcf39N5CEF7QDQIN0hw&oh=00_AfTGO5IfzsEbxFCqddWx-S-7SJlJnywSnTXyjgdq0DteCQ&oe=68801A5D">
    <meta property="og:site_name" content="DermAI - Ứng dụng AI hỗ trợ chẩn đoán bệnh da liễu">

    <link rel="shortcut icon" href="https://github.com/Codedr-edu/DermAI/blob/main/media/Thi%E1%BA%BFt%20k%E1%BA%BF%20ch%C6%B0a%20c%C3%B3%20t%C3%AAn.png?raw=true" type="image/x-icon">

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Hồ sơ - DermAI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #f8fafc 0%, #e8f0ff 100%); padding-bottom: 76px; }
        .profile-container { max-width: 800px; margin: 20px auto; }
        .profile-card { border-radius: 12px; background: #fff; box-shadow: 0 8px 20px rgba(15,23,42,0.06); padding: 20px; margin-bottom: 20px; }
        .section-title { font-weight: 600; margin-bottom: 15px; }
        .post-item, .comment-item, .classification-item { border-bottom: 1px solid #eee; padding: 10px 0; }
        .post-item:last-child, .comment-item:last-child, .classification-item:last-child { border-bottom: none; }
        .classification-img { max-width: 100px; max-height:100px; height: auto; border-radius: 8px; }
        .heatmap-img { max-width: 100%; height: auto; border-radius: 8px; }
    </style>
</head>
<body class="vh-100 d-flex flex-column align-items-center">
    <div class="profile-container w-100">
        <div class="d-flex align-items-center mb-3">
            <div class="brand fs-4 fw-bold me-3">DermAI</div>
            <div class="hint text-muted">Hồ sơ cá nhân</div>
        </div>

        <!-- Profile Info -->
        <div class="profile-card">
            <h5 class="section-title">Thông tin cá nhân</h5>
            <div class="row">
                <div class="col-md-6">
                    <p><strong>Tên người dùng:</strong> {{ profile.user.username }}</p>
                    <p><strong>Email:</strong> {{ profile.user.email }}</p>
                </div>
                <div class="col-md-6">
                    {% if profile.user.birth_date %}
                    <p><strong>Ngày sinh:</strong> {{ profile.user.birth_date|date:"d/m/Y" }}</p>
                    {% endif %}
                    <p><strong>Ngày tham gia:</strong> {{ profile.user.date_joined|date:"d/m/Y" }}</p>
                </div>
            </div>
        </div>

        <!-- Classifications -->
        <div class="profile-card">
            <h5 class="section-title">Lịch sử phân tích da</h5>
            {% if classifications %}
                {% for classification in classifications %}
                <div class="classification-item">
                    <div class="row">
                        <div class="col-md-4">
                            <img src="{{ classification.image.url }}" alt="Skin Image" class="classification-img">
                        </div>
                        <div class="col-md-8">
                            <p><strong>Kết quả sơ bộ:</strong></p>
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <tbody>
                                        {% for pred in classification.result %}
                                        <tr>
                                            <td>{{ pred.class }}</td>
                                            <td>{{ pred.probability|floatformat:2 }}%</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            <br>
                            <a href="{% url 'result' image_id=classification.id %}" class="btn btn-sm btn-outline-primary w-100">Xem chi tiết</a>
                            <br>
                            <!--{% if classification.explain %}
                            <p><strong>Heatmap giải thích:</strong></p>
                            <img src="data:image/png;base64,{{ classification.explain }}" alt="Grad-CAM Heatmap" class="heatmap-img">
                            {% endif %}-->
                            <small class="text-muted">Ngày tải lên: {{ classification.uploaded_at|date:"d/m/Y H:i" }}</small>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p class="text-muted">Chưa có lịch sử phân tích.</p>
            {% endif %}
        </div>

        <!-- Posts 
        <div class="profile-card">
            <h5 class="section-title">Bài viết của bạn</h5>
            {% if posts %}
                {% for post in posts %}
                <div class="post-item">
                    <h6>{{ post.title }}</h6>
                    <p>{{ post.content|truncatechars:200 }}</p>
                    <small class="text-muted">Ngày tạo: {{ post.created_at|date:"d/m/Y H:i" }} | Lượt thích: {{ post.upvotes.count }} | Bình luận: {{ post.comments.count }}</small>
                </div>
                {% endfor %}
            {% else %}
                <p class="text-muted">Chưa có bài viết nào.</p>
            {% endif %}
        </div> -->

        <!-- Comments 
        <div class="profile-card">
            <h5 class="section-title">Bình luận của bạn</h5>
            {% if comments %}
                {% for comment in comments %}
                <div class="comment-item">
                    <p>{{ comment.content|truncatechars:150 }}</p>
                    <small class="text-muted">Trên bài viết: {{ comment.post.title|truncatechars:50 }} | Ngày: {{ comment.created_at|date:"d/m/Y H:i" }} | Lượt thích: {{ comment.upvotes.count }}</small>
                </div>
                {% endfor %}
            {% else %}
                <p class="text-muted">Chưa có bình luận nào.</p>
            {% endif %}
        </div>-->

        <div class="text-center" style="margin-bottom: 10vh;">
            <a href="/" class="btn btn-primary">Quay lại trang chủ</a>
        </div>
    </div>

    <!-- bottom navbar copied from home.html -->
    <nav class="navbar navbar-light bg-white border-top fixed-bottom">
      <div class="container d-flex justify-content-around py-2">
        <a href="/" class="d-flex flex-column align-items-center text-decoration-none text-muted">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-camera-fill" viewBox="0 0 16 16">
            <path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
            <path d="M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1m9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0"/>
          </svg>
        </a>

        <!--<a href="/community" class="d-flex flex-column align-items-center text-decoration-none text-muted">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-square-quote-fill" viewBox="0 0 16 16">
            <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.5a1 1 0 0 0-.8.4l-1.9 2.533a1 1 0 0 1-1.6 0L5.3 12.4a1 1 0 0 0-.8-.4H2a2 2 0 0 1-2-2zm7.194 2.766a1.7 1.7 0 0 0-.227-.272 1.5 1.5 0 0 0-.469-.324l-.008-.004A1.8 1.8 0 0 0 5.734 4C4.776 4 4 4.746 4 5.667c0 .92.776 1.666 1.734 1.666.343 0 .662-.095.931-.26-.137.389-.39.804-.81 1.22a.405.405 0 0 0 .011.59c.173.16.447.155.614-.01 1.334-1.329 1.37-2.758.941-3.706a2.5 2.5 0 0 0-.227-.4zM11 7.073c-.136.389-.39.804-.81 1.22a.405.405 0 0 0 .012.59c.172.16.446.155.613-.01 1.334-1.329 1.37-2.758.942-3.706a2.5 2.5 0 0 0-.228-.4 1.7 1.7 0 0 0-.227-.273 1.5 1.5 0 0 0-.469-.324l-.008-.004A1.8 1.8 0 0 0 10.07 4c-.957 0-1.734.746-1.734 1.667 0 .92.777 1.666 1.734 1.666.343 0 .662-.095.931-.26"/>
          </svg>
        </a>-->

        <a href="/chatbot" class="d-flex flex-column align-items-center text-decoration-none text-muted">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="mb-1" viewBox="0 0 16 16">
            <path d="M2 2h12v9H5.414L3 13.414V2z"/>
          </svg>
        </a>

        <a href="/pharmacy" class="d-flex flex-column align-items-center text-decoration-none text-muted">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-capsule-pill" viewBox="0 0 16 16">
            <path d="M11.02 5.364a3 3 0 0 0-4.242-4.243L1.121 6.778a3 3 0 1 0 4.243 4.243l5.657-5.657Zm-6.413-.657 2.878-2.879a2 2 0 1 1 2.829 2.829L7.435 7.536zM12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8m-.5 1.042a3 3 0 0 0 0 5.917zm1 5.917a3 3 0 0 0 0-5.917z"/>
          </svg>
        </a>

        <a href="tel:115" class="d-flex flex-column align-items-center text-decoration-none text-danger">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="mb-1" viewBox="0 0 16 16">
            <path d="M3.654 1.328a.678.678 0 00-1.015-.063L1.605 2.298c-.483.48-.661 1.18-.45 1.803.35 1.098 1.07 2.78 2.65 4.36 1.58 1.58 3.262 2.3 4.36 2.65.623.211 1.323.033 1.803-.45l1.033-1.033a.678.678 0 00-.063-1.015l-2.07-1.552a.678.678 0 00-.58-.087l-1.52.507a.678.678 0 01-.657-.148L6.9 6.1a.678.678 0 00-.148-.657L6.255 4.9a.678.678 0 00-.087-.58L4.616 2.25z"/>
          </svg>
          <!--<small class="d-block">Gọi cấp cứu</small>-->
        </a>

        <a href="/profile" class="d-flex flex-column align-items-center text-decoration-none text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
            <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/>
          </svg>
        </a>
      </div>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
